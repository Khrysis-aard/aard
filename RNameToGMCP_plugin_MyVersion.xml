<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Tuesday, October 05, 2021, 10:42 AM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "RnameWithGMCP" generated by Plugin Wizard -->

<muclient>
<plugin
   name="RnameWithGMCP"
   author="Crowley"
   id="8a7ff1c8cf6e889324b26e7e"
   language="Lua"
   purpose="Displays GMCP room ID"
   save_state="y"
   date_written="2021-10-05 10:41:05"
   requires="4.80"
   version="1.0"
   >

</plugin>

<triggers>
  <trigger
   enabled="y"
   group="roomid"
   keep_evaluating="y"
   match="{rname}*"
   omit_from_output="y"
   send_to="14"
   sequence="100"
  >
  <send>TSRtable = TriggerStyleRuns</send>
  </trigger>
</triggers>

<aliases>
  <alias
   match="roomid *"
   enabled="y"
   group="on/off"
   send_to="12"
   sequence="100"
  >
  <send>if ("%1") == ("on") then
EnableTriggerGroup("roomid", true)
enabled=1
ColourNote ("blue","red", "Room Id's is enabled!")

elseif ("%1") == ("off") then
EnableTriggerGroup("roomid", false)
ColourNote ("blue","red", "Room Id's is disabled!")
enabled=0
end</send>
  </alias>
</aliases>

<!--  Script  -->


<script>
<![CDATA[
require "gmcphelper"
TSRtable = {}

function OnPluginBroadcast(msg, id, name, text)
      if (enabled ~= nil and enabled == 0) then
return
end
        if (id == "3e7dedbe37e44942dd46d264") then
		if (text == "room.info") then
			for i,v in pairs(TSRtable) do
				if v.text ~= "{rname}" then
					ColourTell (RGBColourToName (v.textcolour),
					RGBColourToName (v.backcolour),
					v.text)
				    break;
				end
			end
			-- ColourTell("white", "", " (" .. gmcp("room.info.num") .. ")")
			Hyperlink ("mapper goto " .. gmcp("room.info.num"),
                        	   "(" .. gmcp("room.info.num") .. ")",
                        	   "",
                        	   "white", "black", 0)
			Note("")
		end
	end
end	

function OnPluginInstall ()
  ColourNote ("blue","yellow","RNameToGMCP Plugin Installed! Type roomid on/off to toggle on and off")
end

]]>
</script>


</muclient>
	
fix to make it better and easier by crowley

Crowley tells you 'Honestly, I'd change the code to this: Make the alias just 'roomid', and change: group="roomid" to name="roomid" Then do: EnableTrigger("roomid", not GetTriggerInfo("roomid", 8)) -- Then if you want to display whether it's on or off, just do: ColourNote("blue", "red", "Roomids are now " .. GetTriggerInfo("roomid", 8) and "enabled!" or "disabled!")'
